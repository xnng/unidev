# @xnng/unidev

> ğŸš€ ä¸€æ¡å‘½ä»¤æå®š UniApp å°ç¨‹åºå¼€å‘ï¼Œå‘Šåˆ«ç¹ççš„æ‰‹åŠ¨æ“ä½œ

[![npm version](https://img.shields.io/npm/v/@xnng/unidev.svg)](https://www.npmjs.com/package/@xnng/unidev)
[![license](https://img.shields.io/npm/l/@xnng/unidev.svg)](https://github.com/xnng/unidev/blob/main/LICENSE)

## é€‚ç”¨åœºæ™¯

å¦‚æœä½ ä½¿ç”¨ HBuilderX å¼€å‘ï¼Œå¯ä»¥é€šè¿‡ IDE ç•Œé¢ç›´æ¥ç‚¹å‡»æŒ‰é’®è¿è¡Œåˆ°å°ç¨‹åºï¼Œè™½ç„¶ä¹Ÿéœ€è¦æ‰‹åŠ¨æ“ä½œï¼Œä½†ä½“éªŒå°šå¯ã€‚

è€Œå¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œä½¿ç”¨ **VS Code + å‘½ä»¤è¡Œ** å¼€å‘ UniApp é¡¹ç›®ï¼Œé‚£ä½ ä¸€å®šæ‡‚ä»¥ä¸‹è¿™äº›ç—›è‹¦ ğŸ‘‡

## ç—›ç‚¹

ä½¿ç”¨å‘½ä»¤è¡Œå¼€å‘å¾®ä¿¡/æ”¯ä»˜å®å°ç¨‹åºæ—¶ï¼Œæ¯æ¬¡å¯åŠ¨å¼€å‘æˆ–æ„å»ºæµç¨‹éƒ½å¾ˆç¹çï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¼ ç»Ÿå¼€å‘æµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ç»ˆç«¯è¿è¡Œ pnpm dev:mp-weixin                                  â”‚
â”‚              â†“                                                  â”‚
â”‚  2. ç­‰å¾…ç¼–è¯‘å®Œæˆ...                                               â”‚
â”‚              â†“                                                  â”‚
â”‚  3. æ‰‹åŠ¨æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·/æ”¯ä»˜å®å¼€å‘è€…å·¥å…·                            â”‚
â”‚              â†“                                                  â”‚
â”‚  4. ç‚¹å‡»ã€Œæ‰“å¼€é¡¹ç›®ã€                                                â”‚
â”‚              â†“                                                  â”‚
â”‚  5. æ‰¾åˆ° dist/dev/mp-weixin ç›®å½•  â† å¼€å‘æ—¶ç”¨è¿™ä¸ª                    â”‚
â”‚     æˆ–è€… dist/build/mp-weixin    â† ä¸Šçº¿æ—¶ç”¨è¿™ä¸ªï¼ˆå®¹æ˜“é€‰é”™ï¼ï¼‰        â”‚
â”‚              â†“                                                  â”‚
â”‚  6. ç¡®è®¤æ‰“å¼€                                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¿™æœ‰å¤šç—›ï¼Ÿ

- **åŒæ—¶å¼€å‘å¤šä¸ªå°ç¨‹åº**ï¼šé¢‘ç¹åˆ‡æ¢é¡¹ç›®ï¼Œæ¯æ¬¡éƒ½è¦é‡å¤ 6 ä¸ªæ­¥éª¤
- **dev å’Œ build ç›®å½•ä¸åŒ**ï¼šå¼€å‘ç”¨ `dist/dev/`ï¼Œä¸Šçº¿ç”¨ `dist/build/`ï¼Œæ‰‹åŠ¨åˆ‡æ¢å®¹æ˜“é€‰é”™
- **æ”¯ä»˜å®å’Œå¾®ä¿¡è·¯å¾„ä¸åŒ**ï¼š`mp-weixin` vs `mp-alipay`ï¼Œåˆå¤šä¸€å±‚å¿ƒæ™ºè´Ÿæ‹…

## è§£å†³æ–¹æ¡ˆ

**ä¸€æ¡å‘½ä»¤ï¼Œå…¨éƒ¨æå®šï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä½¿ç”¨ unidev å                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  $ unidev pnpm dev:mp-weixin                                    â”‚
â”‚                     â†“                                           â”‚
â”‚            âœ¨ è‡ªåŠ¨å®Œæˆä¸€åˆ‡ âœ¨                                      â”‚
â”‚                     â†“                                           â”‚
â”‚           å¼€å‘è€…å·¥å…·å·²æ‰“å¼€ï¼Œé¡¹ç›®å·²åŠ è½½                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

unidev ä¼šï¼š

1. æ‰§è¡Œç¼–è¯‘å‘½ä»¤
2. ç›‘å¬ç¼–è¯‘è¿›åº¦
3. **è‡ªåŠ¨è¯†åˆ« dev/build æ¨¡å¼**ï¼Œé€‰æ‹©æ­£ç¡®çš„ç›®å½•
4. **è‡ªåŠ¨è¯†åˆ«å¾®ä¿¡/æ”¯ä»˜å®å¹³å°**
5. é¦–æ¬¡ç¼–è¯‘å®Œæˆåï¼Œè‡ªåŠ¨æ‰“å¼€å¼€å‘è€…å·¥å…·å¹¶åŠ è½½é¡¹ç›®

**ä½ åªéœ€è¦ä¸“æ³¨äºå†™ä»£ç ï¼Œå…¶ä»–çš„äº¤ç»™ unidevã€‚**

## ç‰¹æ€§

| ç‰¹æ€§              | è¯´æ˜                                         |
| ----------------- | -------------------------------------------- |
| âœ¨ **ä¸€é”®å¯åŠ¨**   | ç¼–è¯‘ + è‡ªåŠ¨æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œä¸€æ°”å‘µæˆ          |
| ğŸ“‚ **æ™ºèƒ½ç›®å½•**   | è‡ªåŠ¨åŒºåˆ† `dev` å’Œ `build` ç›®å½•ï¼Œå†ä¹Ÿä¸ä¼šé€‰é”™ |
| ğŸ¯ **æ™ºèƒ½è¯†åˆ«**   | è‡ªåŠ¨è¯†åˆ«å¾®ä¿¡/æ”¯ä»˜å®å¹³å°ï¼Œæ— éœ€é¢å¤–é…ç½®        |
| ğŸ“ **å¤šé¡¹ç›®å‹å¥½** | æ”¯æŒ `--cwd` æŒ‡å®šé¡¹ç›®ç›®å½•ï¼Œå®Œç¾é€‚é… monorepo |
| âš™ï¸ **å¯é…ç½®**     | æ”¯æŒè‡ªå®šä¹‰å¼€å‘è€…å·¥å…·è·¯å¾„                     |
| ğŸ”„ **å¢é‡ç¼–è¯‘**   | ä»…é¦–æ¬¡ç¼–è¯‘æ—¶æ‰“å¼€å·¥å…·ï¼Œåç»­çƒ­æ›´æ–°ä¸ä¼šé‡å¤æ‰“å¼€ |

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰
npm i -g @xnng/unidev

# æˆ–é¡¹ç›®å†…å®‰è£…
npm i -D @xnng/unidev
```

### å‰ç½®è¦æ±‚

| å¹³å°         | è¦æ±‚                                                                                           |
| ------------ | ---------------------------------------------------------------------------------------------- |
| å¾®ä¿¡å°ç¨‹åº   | å®‰è£… [å¾®ä¿¡å¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html) |
| æ”¯ä»˜å®å°ç¨‹åº | å®‰è£… minidev: `npm i -g minidev`                                                               |

### ä½¿ç”¨

```bash
# å¼€å‘æ¨¡å¼ â†’ è‡ªåŠ¨æ‰“å¼€ dist/dev/mp-weixin
unidev pnpm dev:mp-weixin

# æ„å»ºæ¨¡å¼ â†’ è‡ªåŠ¨æ‰“å¼€ dist/build/mp-weixin
unidev pnpm build:mp-weixin

# æ”¯ä»˜å®å¼€å‘ â†’ è‡ªåŠ¨æ‰“å¼€ dist/dev/mp-alipay
unidev pnpm dev:mp-alipay

# æ”¯ä»˜å®æ„å»º â†’ è‡ªåŠ¨æ‰“å¼€ dist/build/mp-alipay
unidev pnpm build:mp-alipay
```

### Monorepo / å¤šé¡¹ç›®

ä½¿ç”¨ `--cwd` æŒ‡å®šé¡¹ç›®ç›®å½•ï¼Œæ— éœ€ cdï¼š

```bash
# é¡¹ç›® A å¼€å‘
unidev pnpm dev:mp-weixin --cwd apps/project-a

# é¡¹ç›® B æ„å»º
unidev pnpm build:mp-alipay --cwd apps/project-b
```

åœ¨ `package.json` ä¸­é…ç½®è„šæœ¬ï¼š

```json
{
  "scripts": {
    "dev:weixin": "unidev pnpm dev:mp-weixin --cwd apps/myApp",
    "build:weixin": "unidev pnpm build:mp-weixin --cwd apps/myApp",
    "dev:alipay": "unidev pnpm dev:mp-alipay --cwd apps/myApp",
    "build:alipay": "unidev pnpm build:mp-alipay --cwd apps/myApp"
  }
}
```

## é…ç½®

### è‡ªå®šä¹‰å·¥å…·è·¯å¾„

åœ¨é¡¹ç›®ç›®å½•æˆ–ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º `.unidevrc.json`ï¼š

```json
{
  "toolPaths": {
    "wx": "/your/custom/path/to/wechat/cli"
  }
}
```

### é»˜è®¤è·¯å¾„

| å¹³å°   | macOS é»˜è®¤è·¯å¾„                                           |
| ------ | -------------------------------------------------------- |
| å¾®ä¿¡   | `/Applications/wechatwebdevtools.app/Contents/MacOS/cli` |
| æ”¯ä»˜å® | ä½¿ç”¨ `minidev` CLI                                       |

## å‘½ä»¤å‚è€ƒ

```
unidev <package-manager> <command> [options]

é€‰é¡¹:
  --cwd <path>    æŒ‡å®šé¡¹ç›®ç›®å½•
  -v, --version   æ˜¾ç¤ºç‰ˆæœ¬å·
  -h, --help      æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

ç¤ºä¾‹:
  unidev pnpm dev:mp-weixin
  unidev npm run build:mp-alipay
  unidev yarn dev:mp-weixin --cwd ./apps/myApp
```

## å·¥ä½œåŸç†

```
å‘½ä»¤è§£æ â†’ æ‰§è¡Œç¼–è¯‘ â†’ ç›‘å¬è¾“å‡º â†’ æ£€æµ‹å®Œæˆ â†’ æ‰“å¼€å·¥å…·
   â”‚          â”‚          â”‚          â”‚          â”‚
   â”‚          â”‚          â”‚          â”‚          â””â”€ è°ƒç”¨å¼€å‘è€…å·¥å…· CLI
   â”‚          â”‚          â”‚          â”‚
   â”‚          â”‚          â”‚          â””â”€ æ£€æµ‹ "Build complete"
   â”‚          â”‚          â”‚
   â”‚          â”‚          â””â”€ è¿‡æ»¤å¢é‡ç¼–è¯‘ï¼ˆä¸é‡å¤æ‰“å¼€ï¼‰
   â”‚          â”‚
   â”‚          â””â”€ pnpm dev:mp-weixin
   â”‚
   â””â”€ è¯†åˆ«å¹³å°(weixin/alipay) + æ¨¡å¼(dev/build)
```

## ç³»ç»Ÿè¦æ±‚

- macOS / Windows
- Node.js >= 14

## License

MIT Â© [xnng](https://github.com/xnng)

---

**å¦‚æœè¿™ä¸ªå·¥å…·å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ â­ï¸ Star æ”¯æŒï¼**
